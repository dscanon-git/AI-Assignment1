<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title></title>
    <style>
      .frame {
        position: relative;
        width: 612px;
        height: 612px;
        left: 31%;
        top: 25%;
        background-color: #bdc3c7;
      }
      .tile {
        position: relative;
        display: block;
        float: left;
        width: 200px;
        height: 200px;
        border-style: solid;
        border-color: black;
        border-width: 2px;
        font-size: 30px;
        text-align: center;
        vertical-align: middle;
        line-height: 204px;
        background-color: #ecf0f1;
        box-shadow: 10px 10px 5px #95a5a6;
      }
    </style>
  </head>
  <body>


    <!-- playground -->
    <div class="frame">
      <div class="tile" id="pos-0">x</div>
      <div class="tile" id="pos-1">1</div>
      <div class="tile" id="pos-2">2</div>
      <div class="tile" id="pos-3">3</div>
      <div class="tile" id="pos-4">4</div>
      <div class="tile" id="pos-5">5</div>
      <div class="tile" id="pos-6">6</div>
      <div class="tile" id="pos-7">7</div>
      <div class="tile" id="pos-8">8</div>
    </div>
    <br /><br />
    <div style="text-align:center;">
      <h1>Press anykey for continue</h1>
    </div>

    <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
    <script type="text/javascript">
      // dummy json
      var dummy_json = '{"Init":[2,4,3,7,1,5,0,8,6],"Sequence":[{"Tile":7,"Direction":"D"},{"Tile":1,"Direction":"L"},{"Tile":4,"Direction":"D"},{"Tile":2,"Direction":"R"},{"Tile":1,"Direction":"U"},{"Tile":4,"Direction":"L"},{"Tile":5,"Direction":"L"},{"Tile":3,"Direction":"D"},{"Tile":2,"Direction":"R"}]}';

      $( document ).ready(function() {
          // parse string to json
          info = JSON.parse(dummy_json);
          // test
          console.log(info["Init"][0]);
          // initial board game
          for(var i = 0; i < 9; i++){
            $("#pos-"+i).html(info["Init"][i]);
            if(info["Init"][i] == 0){
              	$("#pos-"+i).css("visibility", "hidden");
            }
            // change id like the initial format
            $("#pos-"+i).attr("id", info["Init"][i]);
          }

          // Try to move on step
          var step_arr = info["Sequence"];
          console.log(step_arr.length);

          // step moving action array
          var action_arr = [];
          var count_step = 0;

          $ ( document ).keypress(function(e) {
            var obj_id = step_arr[count_step]["Tile"];
            console.log('tile : '+info["Sequence"][count_step]["Tile"]+', move: '+info["Sequence"][count_step]["Direction"]);
            tile_move(obj_id, step_arr[count_step]["Direction"])
            count_step++;
          });
      });
      


      // move position
      function tile_move(id, pos, time_delay){
        var move_params = {};
        switch (pos) {
          case 'R':
            pos = "right";
            opt = "-"
            break;
          case 'L':
            pos = "left"
            opt = "-"
            break;
          case 'U':
            pos = "top";
            opt = "-"
            break;
          case 'D':
            pos = "top";
            opt = "+"
            break;
          default:
        }
        console.log(id+pos);
        
        move_params[pos] = opt+"=204";
        console.log(time_delay);
        $( "#"+id ).animate( move_params, 1000);
      }

    </script>
  </body>
</html>
